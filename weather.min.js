function main_panel(){panel=$.jsPanel({theme:"info",draggable:"disabled",resizable:"disabled",contentSize:{width:320,height:300},content:function(){return $(this).css("padding","30px"),$("<div id='wait'><img src='wait.gif'/><br>Loading...</div>").css({padding:"30px",textAlign:"center"})},headerTitle:"Weather App",headerControls:{controls:"none"},footerToolbar:[{item:"<button type='button'></button>",btnclass:"btn btn-success",btntext:"Refresh",callback:function(){panel.contentReload(),display_weather()}}],callback:function(){display_weather()}})}function get_location(t){"geolocation"in navigator?navigator.geolocation.getCurrentPosition(function(i){latitude=i.coords.latitude,longitude=i.coords.longitude,t()},function(){display_alert("Could not find location")}):display_alert("Browser doesn't support geolocation!")}function display_weather(){get_location(function(){$.getJSON("http://api.openweathermap.org/data/2.5/weather",{lat:latitude,lon:longitude,format:"json",units:"metric",APPID:"53f9d8e4213222cf517d86dc406d67fc"}).done(function(t){var i="<div class='well'>  <div class='row bigfont'>    <div class='col-xs-5'>Country: </div><div class='col-xs-7 text-success'>"+t.sys.country+"</div>    <div class='col-xs-5'>City: </div><div class='col-xs-7 text-success'>"+t.name+"</div>  </div><br>  <div class='row'>    <div class='col-xs-5'>Temperature: </div><div class='col-xs-7 bigfont text-primary'>"+t.main.temp+" °C </div>    <div class='col-xs-5'>Maximum: </div><div class='col-xs-7'>"+t.main.temp_max+" °C </div>    <div class='col-xs-5'>Minimum: </div><div class='col-xs-7'>"+t.main.temp_min+" °C </div>    <div class='col-xs-12 text-capitalize text-primary bigfont'>"+t.weather[0].description+"</div>  </div></div>";$("#wait").css("display","none"),panel.content.append(i)}).fail(function(t,i,e){display_alert("Request Failed: "+(i+", "+e))})})}function display_alert(t){var i="<div class='alert alert-danger'>"+t+"</div>";$("#wait").css("display","none"),panel.content.append(i)}var latitude,longitude,panel;